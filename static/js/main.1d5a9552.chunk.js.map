{"version":3,"sources":["components/card.jsx","App.js","serviceWorker.js","index.js"],"names":["cardInfos","img","tags","text","h6","p","Card","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","dragStart","bind","assertThisInitialized","cardTransform","indexTransform","prev","next","currentIndex","displacement","x","y","start","position","end","direction","swipping","directionArr","visible","winWidth","slideWidth","offsetWidth","index","style","offset","concat","setState","window","innerWidth","e","touches","length","objectSpread","targetTouches","clientX","clientY","moveNext","data","console","log","dataArr","display","endX","endXLeft","endY","_this2","react_default","a","createElement","id","className","backgroundColor","href","src","alt","ref","map","cardInfo","tag","key","onDragStart","onTouchStart","touchStart","onTouchMove","touchMove","onTouchEnd","touchEnd","join","onClick","Component","App","components_card","Boolean","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.1d5a9552.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./card.css\";\r\n\r\nconst cardInfos = [\r\n  {\r\n    img: \"//qidian.gtimg.com/acts/2019/57928942/images/boy/1_1.gif\",\r\n    tags: [\"幻想世界\", \"长篇追读\"],\r\n    text: { h6: \"我家妹妹是反派\", p: \"兄妹如何在死亡游戏里浪到飞起！\" }\r\n  },\r\n  {\r\n    img: \"//qidian.gtimg.com/acts/2019/57928942/images/boy/2.png\",\r\n    tags: [\"幻想世界\", \"长篇追读\"],\r\n    text: {\r\n      h6: \"笼中对追凶游戏\",\r\n      p: \"这场游戏里，你必须找到凶手，或者成为凶手……\"\r\n    }\r\n  },\r\n  {\r\n    img: \"//qidian.gtimg.com/acts/2019/57928942/images/boy/2.png\",\r\n    tags: [\"幻想世界\", \"长篇追读\"],\r\n    text: { h6: \"话不可以乱说\", p: \"小心，这个群里说的任何话都会成真哦...\" }\r\n  },\r\n  {\r\n    img: \"//qidian.gtimg.com/acts/2019/57928942/images/boy/2.png\",\r\n    tags: [\"幻想世界\", \"长篇追读\"],\r\n    text: { h6: \"家长聊天群\", p: \"高能预警！家长群炫富模式开启\" }\r\n  },\r\n  {\r\n    img: \"//qidian.gtimg.com/acts/2019/57928942/images/boy/2.png\",\r\n    tags: [\"幻想世界\", \"长篇追读\"],\r\n    text: { h6: \"师父，大师兄让妖怪抓走了！\", p: \"西天取经只为报销路费\" }\r\n  }\r\n];\r\n\r\nclass Card extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.dragStart = this.dragStart.bind(this);\r\n    this.cardTransform = this.cardTransform.bind(this);\r\n    this.indexTransform = this.indexTransform.bind(this);\r\n    this.prev = this.prev.bind(this);\r\n    this.next = this.next.bind(this);\r\n    this.state = {\r\n      // 当前展示的图片index\r\n      currentIndex: 0,\r\n      // 记录偏移量\r\n      displacement: {\r\n        x: 0,\r\n        y: 0\r\n      },\r\n      start: { x: 0, y: 0 },\r\n      // 位置信息\r\n      position: {\r\n        //start: { x: 0, y: 0 },\r\n        end: { x: 0, y: 0 },\r\n        direction: 1, // 滑动方向，左是-1，右是1\r\n        swipping: false // 是否在拖动交换过程中\r\n      },\r\n      // 记录每一个丢出去的方向\r\n      directionArr: [],\r\n      // 显示图片的堆叠数量\r\n      visible: 3,\r\n      // 视口宽度\r\n      winWidth: 0,\r\n      //  滑动阈值\r\n      slideWidth: 70,\r\n      // 超过阈值时的自动偏移量\r\n      offsetWidth: 120\r\n      // temporaryData: {\r\n      //   lastPosWidth: \"\",\r\n      //   lastPosHeight: \"\"\r\n      // }\r\n    };\r\n  }\r\n  state = {};\r\n\r\n  // 初始化每张卡片的样式\r\n  cardTransform(index) {\r\n    let style = {};\r\n    //卡片自动位移距离（飞出屏幕多远）\r\n    let offset = 0;\r\n    if (this.state.directionArr[index] === 1) {\r\n      offset = 800;\r\n    } else if (this.state.directionArr[index] === -1) {\r\n      offset = -800;\r\n    }\r\n\r\n    style[\"zIndex\"] = this.state.currentIndex - index + this.state.visible;\r\n    style[\"transform\"] = `translate3d(0,0,${(this.state.currentIndex - index) *\r\n      60}px)`;\r\n\r\n    //让藏在后面的卡片缩小样式堆叠在一起并透明不显示。一旦飞走一张，下一张卡片会自动过渡动画往前推进\r\n    if (index - this.state.currentIndex < 0) {\r\n      style[\"opacity\"] = 0;\r\n      style[\"transform\"] = `translate3d(${this.state.position.end.x +\r\n        offset}px,${this.state.position.end.y}px,${(this.state.currentIndex -\r\n        index) *\r\n        60}px) rotate(${this.state.position.direction * -65}deg)`;\r\n    }\r\n\r\n    //非手势滑动状态才添加过渡动画;\r\n    if (!this.state.position.swipping) {\r\n      style[\"transitionTimingFunction\"] = \"ease\";\r\n      style[\"transitionDuration\"] = 300 + \"ms\";\r\n    }\r\n    return style;\r\n  }\r\n  //第一张卡片的样式\r\n  indexTransform(index) {\r\n    let style = {};\r\n    if (index === this.state.currentIndex) {\r\n      style[\"transform\"] = `translate3d(${this.state.displacement.x}px,${\r\n        this.state.displacement.y\r\n      }px,${(this.state.currentIndex - index) * 60}px) rotate(${(this.state\r\n        .displacement.x /\r\n        this.state.winWidth) *\r\n        -65}deg)`;\r\n      //style[\"transformOrigin\"] = \"left top\";\r\n    }\r\n\r\n    //非手势滑动状态才添加过渡动画;\r\n    if (!this.state.position.swipping) {\r\n      style[\"transitionTimingFunction\"] = \"ease\";\r\n      style[\"transitionDuration\"] = 300 + \"ms\";\r\n    }\r\n\r\n    return style;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      winWidth: window.innerWidth\r\n    });\r\n  }\r\n  offsetRatio() {\r\n    //let width = this.refs.card.offsetWidth;\r\n  }\r\n  dragStart() {}\r\n  touchStart(e) {\r\n    // if (this.state.position.swipping) {\r\n    //   return;\r\n    // }\r\n    if (e.touches.length > 1) {\r\n      this.setState({\r\n        position: {\r\n          ...this.state.position,\r\n          swipping: false\r\n        }\r\n      });\r\n      return;\r\n    } else {\r\n      this.setState({\r\n        start: {\r\n          ...this.state.start,\r\n          x: e.targetTouches[0].clientX,\r\n          y: e.targetTouches[0].clientY\r\n        }\r\n      });\r\n      // this.setState({\r\n      //   position: {\r\n      //     ...this.state.position,\r\n      //     start: {\r\n      //       ...this.state.position.start,\r\n      //       x: e.targetTouches[0].clientX,\r\n      //       y: e.targetTouches[0].clientY\r\n      //     },\r\n      //     end: {\r\n      //       ...this.state.position.end,\r\n      //       x: e.targetTouches[0].clientX,\r\n      //       y: e.targetTouches[0].clientY\r\n      //     }\r\n      //   }\r\n      // });\r\n    }\r\n    this.setState({\r\n      position: {\r\n        ...this.state.position,\r\n        swipping: true\r\n      }\r\n    });\r\n  }\r\n  touchMove(e) {\r\n    if (this.state.position.swipping) {\r\n      this.setState({\r\n        position: {\r\n          ...this.state.position,\r\n          end: {\r\n            ...this.state.position.end,\r\n            x: e.targetTouches[0].clientX,\r\n            y: e.targetTouches[0].clientY\r\n          }\r\n        }\r\n      });\r\n    }\r\n    this.setState({\r\n      displacement: {\r\n        ...this.state.displacement,\r\n        x: this.state.position.end.x - this.state.start.x,\r\n        y: this.state.position.end.y - this.state.start.y\r\n      }\r\n    });\r\n  }\r\n  touchEnd(e) {\r\n    //滑动结束，触发判断\r\n    this.setState({\r\n      position: {\r\n        ...this.state.position,\r\n        // end: {\r\n        //   ...this.state.position.end,\r\n        //   x: this.state.displacement.x,\r\n        //   y: this.state.displacement.y\r\n        // },\r\n        swipping: false\r\n      }\r\n    });\r\n\r\n    //判断滑动距离超过设定值时，自动飞出\r\n    if (this.state.displacement.x > this.state.slideWidth) {\r\n      //往右\r\n      this.moveNext(1);\r\n    } else if (this.state.displacement.x < -this.state.slideWidth) {\r\n      //往左\r\n      this.moveNext(-1);\r\n    }\r\n    this.setState({\r\n      displacement: {\r\n        ...this.state.displacement,\r\n        x: 0,\r\n        y: 0\r\n      }\r\n    });\r\n    // this.$nextTick(() => {\r\n    //   this.displacement.x = 0;\r\n    //   this.displacement.y = 0;\r\n    //   this.isDrag = false;\r\n    // });\r\n  }\r\n  moveNext(direction) {\r\n    //alert(\"next\");\r\n    let data = this.state.position;\r\n    data.direction = direction;\r\n    this.setState({\r\n      position: data\r\n    });\r\n    console.log(this.state.position.direction);\r\n\r\n    //防止在最后倒数几张时操时出错\r\n    try {\r\n      this.dataArr[this.state.currentIndex + 3].display = true;\r\n    } catch (e) {}\r\n\r\n    //防止在第一张时操作出错;\r\n    if (this.state.currentIndex > 0) {\r\n      try {\r\n        this.dataArr[this.state.currentIndex - 1].display = false;\r\n      } catch (e) {}\r\n    }\r\n\r\n    let currentIndex = this.state.currentIndex;\r\n    currentIndex++;\r\n    let offsetWidth = this.state.offsetWidth;\r\n    let endX = this.state.position.end[\"x\"] - offsetWidth;\r\n    let endXLeft = this.state.position.end[\"x\"] + offsetWidth;\r\n    let endY = this.state.position.end[\"y\"] + offsetWidth / 2;\r\n    //每次让下一张卡片往前推进，反之 -- 就是返回上一张\r\n\r\n    //alert(endX);\r\n\r\n    this.setState({\r\n      currentIndex: currentIndex\r\n    });\r\n    if (direction > 0) {\r\n      console.log(\"right\");\r\n      //alert(\"test\");\r\n      this.setState({\r\n        position: {\r\n          ...this.state.position,\r\n          end: {\r\n            ...this.state.position.end,\r\n            x: endX,\r\n            y: endY\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      console.log(\"left\");\r\n      //alert(\"else\");\r\n      this.setState({\r\n        position: {\r\n          ...this.state.position,\r\n          end: {\r\n            ...this.state.position.end,\r\n            x: endXLeft,\r\n            y: endY\r\n          }\r\n        }\r\n      });\r\n      console.log(this.state.position.end.x);\r\n      //alert(this.state.position.end.x);\r\n    }\r\n    // this.state.currentIndex++;\r\n    // !direction\r\n    //   ? (this.state.position.end[\"x\"] -= this.state.offsetWidth)\r\n    //   : (this.state.position.end[\"x\"] += this.state.offsetWidth);\r\n    // this.state.position.end[\"y\"] += this.state.offsetWidth / 2;\r\n  }\r\n  // nextTick() {\r\n  //   this.setState({\r\n  //     temporaryData: {\r\n  //       ...this.state.temporaryData,\r\n  //       lastPosWidth: this.state.displacement.x,\r\n  //       lastPosHeight: this.state.displacement.y\r\n  //     }\r\n  //   });\r\n  // }\r\n  prev() {\r\n    this.moveNext(1);\r\n  }\r\n  next() {\r\n    // let width = this.refs.card.offsetWidth;\r\n    // this.setState({\r\n    //   displacement: {\r\n    //     ...this.state.displacement,\r\n    //     x: width,\r\n    //     y: 0\r\n    //   }\r\n    // });\r\n    // this.setState({\r\n    //   position: {\r\n    //     ...this.state.position,\r\n    //     direction: -1\r\n    //   }\r\n    // });\r\n    // console.log(this.refs.card.offsetWidth);\r\n    // console.log(\"next\");\r\n    this.moveNext(-1);\r\n  }\r\n  render() {\r\n    return (\r\n      <div id=\"app\">\r\n        <div\r\n          className=\"activity-container font-family\"\r\n          style={{ backgroundColor: \"rgba(255, 255, 255, 0)\" }}\r\n        >\r\n          <a className=\"banner\" href=\"#/card\">\r\n            <img\r\n              src=\"//qidian.qpic.cn/qidian_common/349573/4e27870b2b8fcb410d841e4e860c90e2/0\"\r\n              alt=\"在APP打开\"\r\n              className=\"banner-img\"\r\n            />\r\n            <div className=\"banner-close\" href=\"#/card\">\r\n              <img\r\n                alt=\"\"\r\n                src=\"//bossaudioandcomic-1252317822.image.myqcloud.com/activity/document/78c37f2185a6e5fef924bec7af264980.svg\"\r\n              />\r\n            </div>\r\n            {/* <a className=\"banner-close\" href=\"#/card\">\r\n              <img\r\n                alt=\"\"\r\n                src=\"//bossaudioandcomic-1252317822.image.myqcloud.com/activity/document/78c37f2185a6e5fef924bec7af264980.svg\"\r\n              />\r\n            </a> */}\r\n          </a>\r\n          <div className=\"activity\">\r\n            <div id=\"component-10954\">\r\n              <div>\r\n                <div id=\"app\" className=\"warp noah-chat-57928942 color-1\">\r\n                  <div className=\"mask\" />\r\n                  <div className=\"card_container\" ref=\"card\">\r\n                    {cardInfos.map((cardInfo, index) => {\r\n                      const tags = cardInfo.tags.map((tag, index) => {\r\n                        return <span key={index}>{tag}</span>;\r\n                      });\r\n                      return (\r\n                        <div\r\n                          key={index}\r\n                          onDragStart={this.dragStart}\r\n                          onTouchStart={e => {\r\n                            this.touchStart(e);\r\n                          }}\r\n                          onTouchMove={e => {\r\n                            this.touchMove(e);\r\n                          }}\r\n                          onTouchEnd={e => {\r\n                            this.touchEnd(e);\r\n                          }}\r\n                          // onMouseDown={e => {\r\n                          //   this.touchStart(e);\r\n                          // }}\r\n                          // onMouseUp={e => {\r\n                          //   this.touchMove(e);\r\n                          // }}\r\n                          // onMouseMove={e => {\r\n                          //   this.touchEnd(e);\r\n                          // }}\r\n                          className={[\r\n                            \"card \",\r\n                            this.state.currentIndex -\r\n                              index +\r\n                              this.state.visible <=\r\n                            0\r\n                              ? null\r\n                              : \"draw\"\r\n                          ].join(\"\")}\r\n                          style={{\r\n                            ...this.cardTransform(index),\r\n                            ...this.indexTransform(index)\r\n                          }}\r\n                          // style={this.indexTransform(index)}\r\n                          // style={{\r\n                          //   zIndex: 3,\r\n                          //   transform:\r\n                          //     \"translate3d(0px, 0px, 0px) rotate(0deg)\",\r\n                          //   transitionTimingFunction: \"ease\",\r\n                          //   transitionDuration: 300\r\n                          // }}\r\n                        >\r\n                          <div className=\"img-box\">\r\n                            <img alt=\"\" src={cardInfo.img} />\r\n                            <div className=\"alpha-box\" />\r\n                            <div className=\"tag show\">{tags}</div>\r\n                          </div>\r\n                          <div className=\"info\">\r\n                            <div className=\"text\">\r\n                              <h6>{cardInfo.text.h6}</h6>\r\n                              <p>{cardInfo.text.p}</p>\r\n                            </div>\r\n                            <em className=\"read-btn\">\r\n                              <i>阅读</i>\r\n                              <span />\r\n                            </em>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n\r\n                    {/* <div\r\n                      onDragStart={this.dragStart}\r\n                      className=\"card draw\"\r\n                      style={{\r\n                        zIndex: 2,\r\n                        transform: \"translate3d(0px, 0px, -60px)\",\r\n                        transitionTimingFunction: \"ease\",\r\n                        transitionDuration: 300\r\n                      }}\r\n                    >\r\n                      <div className=\"img-box\">\r\n                        <img\r\n                          alt=\"\"\r\n                          src=\"//qidian.gtimg.com/acts/2019/57928942/images/boy/2.png\"\r\n                        />\r\n                        <div className=\"alpha-box\" />\r\n                        <div className=\"tag\">\r\n                          <span>幻想世界</span>\r\n                          <span>长篇追读</span>\r\n                        </div>\r\n                      </div>{\" \"}\r\n                      <div className=\"info\">\r\n                        <div className=\"text\">\r\n                          <h6>笼中对追凶游戏</h6>\r\n                          <p>这场游戏里，你必须找到凶手，或者成为凶手……</p>\r\n                        </div>\r\n                        <em className=\"read-btn\">\r\n                          <i>阅读</i>\r\n                          <span />\r\n                        </em>\r\n                      </div>\r\n                    </div>\r\n                    <div\r\n                      onDragStart={this.dragStart}\r\n                      className=\"card draw\"\r\n                      style={{\r\n                        zIndex: 1,\r\n                        transform: \"translate3d(0px, 0px, -120px)\",\r\n                        transitionTimingFunction: \"ease\",\r\n                        transitionDuration: 300\r\n                      }}\r\n                    >\r\n                      <div className=\"img-box\">\r\n                        <img alt=\"\" src=\"\" />\r\n                        <div className=\"alpha-box\" />\r\n                        <div className=\"tag\">\r\n                          <span>幻想世界</span>\r\n                          <span>长篇追读</span>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"info\">\r\n                        <div className=\"text\">\r\n                          <h6>话不可以乱说</h6>\r\n                          <p>小心，这个群里说的任何话都会成真哦...</p>\r\n                        </div>\r\n                        <em className=\"read-btn\">\r\n                          <i>阅读</i>\r\n                          <span />\r\n                        </em>\r\n                      </div>\r\n                    </div> */}\r\n                  </div>\r\n                  <div className=\"auto-height\" />\r\n                  <div className=\"btn_group\">\r\n                    <a\r\n                      href=\"#/card\"\r\n                      className=\"back disabled\"\r\n                      onClick={this.prev}\r\n                    >\r\n                      {\" \"}\r\n                    </a>\r\n                    <a href=\"#/card\" className=\"add-fav\" onClick={this.next}>\r\n                      {\" \"}\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Card;\r\n","import React from \"react\";\nimport Card from \"./components/card\";\nimport \"./App.css\";\n\nfunction App() {\n  return <Card />;\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}